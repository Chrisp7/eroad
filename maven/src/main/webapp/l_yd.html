<!DOCTYPE html>
<html style="margin:0;height:100%;">

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>运单</title>
    <link rel="stylesheet" href="style/columnal.css">
    <link rel="stylesheet" href="style/reset.css">
    <script type="text/javascript" src="js/vendor/jquery-2.2.1.min.js">
    </script>
    <script type="text/javascript" src="js/init.js"></script>
    <script type="text/javascript" src="js/l_yd.js"></script>
    <style type="text/css">
    * {
        overflow: hidden;
    }
    
    .container,
    .row {
        width: 100%;
        height: 100%;
        max-width: 100%;
        margin: 0;
        padding: 0;
        border: 0;
    }
    /*左边运单列表*/
    
    .title {
        width: 98%;
        /*background: #E41819;*/
        background:#424242;
        color: #767676;
        font-size: 1.5rem;
        text-align: center;
        border-bottom: 1px solid #eee;
    }
    .title label{
        line-height: 2;
    }

    input[name="radio_yd_type"]{
        background
    }
    .active {
        height: 91%;
        overflow-y: scroll;
    }
    
    .ele {
        border-bottom: 1px solid #eee;
        border-right: 1px solid #eee;
    }
    
    .ele:hover {
        background: #000;
        color: #fff;
    }
    
    .line {
        text-align: center;
        line-height: 1.5;
    }
    /*列表动画*/
    
    .ele {
        position: relative;
        opacity: 0;
        top: 0;
    }
    
    @keyframes ele-show {
        0% {
            opacity: 0;
            top: 200px;
        }
        100% {
            opacity: 1;
            top: 0;
        }
    }
    
    .active .ele {
        animation: ele-show .8s linear forwards;
    }
    
    .active .ele1 {
        animation-delay: .4s;
    }
    
    .active .ele2 {
        animation-delay: .8s;
    }
    /*右边地图*/
    
    .right {
        overflow: hidden;
    }
    
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="left col_3 noRmargin height_100">
                <div class="title">
                    <label for="r_1">
                        <input id="r_1" type="radio" value="1" name="radio_yd_type" checked hidden>运单</label>
                    <label for="r_2">
                        <input id="r_2" type="radio" value="2" name="radio_yd_type" hidden>发布中订单</label>
                    <label for="r_3">
                        <input id="r_3" type="radio" value="3" name="radio_yd_type" hidden>历史订单</label>
                </div>
                <ul class="col_12 active">
                    <li class="col_12 ele">
                        <div class="line">car_number："苏E12345"</div>
                        <div class="line">username："aaa"</div>
                        <div class="line">phone_number："11111111111"</div>
                        <div class="line">sketch："猪"</div>
                        <div class="line">
                            <div class="float_left">start_address</div>
                            ————→
                            <div class="float_right">destination</div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="right col_9 omega height_100">
                <iframe id="iframe_map" src="map/ydMap.html" style="width:100%;height:100%;"></iframe>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {

        var AllGlobal = window.top.AllGlobal;


        $("input:radio[name=radio_yd_type]").change(function(event) {
            $("input:radio[name=radio_yd_type]").parent().css('color', '#767676');
            $("input:radio[name=radio_yd_type]:checked").parent().css('color', '#fff');
            var yd_type = $("input:radio[name=radio_yd_type]:checked").val();

            if (AllGlobal != null && AllGlobal != undefined) {
                // 获取正在运行的订单信息列表
                var prefix = AllGlobal.getPrefix();
                var url = prefix + 'company/get_executing_order.erd';
                var o = {};
                o.id = AllGlobal.getUserInfo().id;

                ajaxPost(url, o, function(data, textStatus, xhr) {
                    var domStr = "";
                    if (data[0].status === "ok") {
                        for (var i = 1; i < data.length; i++) {
                            domStr += '<li class="col_12 ele ele' + i + '">';
                            domStr += '    <div class="display_none">' + data[i].id + '</div>';
                            domStr += '    <div class="line">司机：' + data[i].username + '</div>';
                            domStr += '    <div class="line">车辆牌照：' + data[i].car_number + '</div>';
                            domStr += '    <div class="line">手机：' + data[i].phone_number + '</div>';
                            domStr += '    <div class="line">货物：' + data[i].sketch + '</div>';
                            domStr += '    <div class="line">';
                            domStr += '        <div class="float_left">' + data[i].start_address + '</div>';
                            domStr += '        ————→';
                            domStr += '        <div class="float_right">' + data[i].destination + '</div>';
                            domStr += '    </div>';
                            domStr += '</li>';
                        }
                        $("ul.active").html(domStr);
                        $("ul.active li").click(function(event) {
                            var crtOderId = $(this).children('.display_none').html();
                            $("#iframe_map").attr('src', 'map/ydMap.html?id=' + crtOderId);
                        });
                    } else {
                        console.log(data[0]);
                    }
                });
            } else {
                console.log("mediator undefined");
            }

        });
        $("input:radio[name=radio_yd_type]").change();
    });
    </script>
</body>

</html>
